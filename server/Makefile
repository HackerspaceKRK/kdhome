# Generated by KD build system

CC=gcc
CXX=g++
OUTPUT=kdhome

DEFINES=-DLIBCONFIG_STATIC -DLIBCONFIGXX_STATIC
INCLUDEPATH=-I. -I.. -I../kdutils -I3rd/ -I3rd/libconfig-1.4.9
LIBS=-L/usr/lib -lpthread -lzmq

CFLAGS=-ggdb -Werror=implicit -O1 -fdata-sections -ffunction-sections
CFLAGS+=$(DEFINES)
CFLAGS+=$(INCLUDEPATH)
CXXFLAGS=$(CFLAGS) -std=c++11
LFLAGS=-Wl,--relax,--gc-sections -Wl,-gc-sections -Wl,-Map=build/$(OUTPUT).map
LFLAGS+=$(LIBS)

all: prepare build/$(OUTPUT)
	size build/$(OUTPUT)

prepare:
	mkdir -p build/

build/main.o: main.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/Program.o: Program.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/Controller.o: Controller.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/EthernetDevice.o: EthernetDevice.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/StorageEngine.o: StorageEngine.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/Providers.o: Providers.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/providers_OutputProvider.o: providers/OutputProvider.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/providers_InputProvider.o: providers/InputProvider.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/providers_TempProvider.o: providers/TempProvider.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/providers_IRProvider.o: providers/IRProvider.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/providers_CounterProvider.o: providers/CounterProvider.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/__kdutils_Logger.o: ../kdutils/Logger.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/__kdutils_UdpSocket.o: ../kdutils/UdpSocket.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/__kdutils_kdutils.o: ../kdutils/kdutils.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/3rd_format.o: 3rd/format.cc
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/3rd_libconfig-1.4.9_grammar.o: 3rd/libconfig-1.4.9/grammar.c
	$(CC) $(CFLAGS) -c $< -o $@

build/3rd_libconfig-1.4.9_libconfig.o: 3rd/libconfig-1.4.9/libconfig.c
	$(CC) $(CFLAGS) -c $< -o $@

build/3rd_libconfig-1.4.9_scanctx.o: 3rd/libconfig-1.4.9/scanctx.c
	$(CC) $(CFLAGS) -c $< -o $@

build/3rd_libconfig-1.4.9_scanner.o: 3rd/libconfig-1.4.9/scanner.c
	$(CC) $(CFLAGS) -c $< -o $@

build/3rd_libconfig-1.4.9_strbuf.o: 3rd/libconfig-1.4.9/strbuf.c
	$(CC) $(CFLAGS) -c $< -o $@

build/3rd_libconfig-1.4.9_libconfigcpp.o: 3rd/libconfig-1.4.9/libconfigcpp.cc
	$(CXX) $(CXXFLAGS) -c $< -o $@

build/$(OUTPUT): build/main.o build/Program.o build/Controller.o build/EthernetDevice.o build/StorageEngine.o build/Providers.o build/providers_OutputProvider.o build/providers_InputProvider.o build/providers_TempProvider.o build/providers_IRProvider.o build/providers_CounterProvider.o build/__kdutils_Logger.o build/__kdutils_UdpSocket.o build/__kdutils_kdutils.o build/3rd_format.o build/3rd_libconfig-1.4.9_grammar.o build/3rd_libconfig-1.4.9_libconfig.o build/3rd_libconfig-1.4.9_scanctx.o build/3rd_libconfig-1.4.9_scanner.o build/3rd_libconfig-1.4.9_strbuf.o build/3rd_libconfig-1.4.9_libconfigcpp.o
	$(CXX) $^ $(LFLAGS) -o $@

clean:
	rm -f build/$(OUTPUT) build/$(OUTPUT).map build/main.o build/Program.o build/Controller.o build/EthernetDevice.o build/StorageEngine.o build/Providers.o build/providers_OutputProvider.o build/providers_InputProvider.o build/providers_TempProvider.o build/providers_IRProvider.o build/providers_CounterProvider.o build/__kdutils_Logger.o build/__kdutils_UdpSocket.o build/__kdutils_kdutils.o build/3rd_format.o build/3rd_libconfig-1.4.9_grammar.o build/3rd_libconfig-1.4.9_libconfig.o build/3rd_libconfig-1.4.9_scanctx.o build/3rd_libconfig-1.4.9_scanner.o build/3rd_libconfig-1.4.9_strbuf.o build/3rd_libconfig-1.4.9_libconfigcpp.o

.PHONY: clean
