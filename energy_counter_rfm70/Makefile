# Generated by KD uC build system

CC=arm-none-eabi-gcc-col
CXX=arm-none-eabi-g++-col

F_CPU=8000000
RAMSIZE=2048

DEFINES=-DSTM32F0XX_LD -DPRINTF -DF_CPU=$(F_CPU) -DRAMSIZE=$(RAMSIZE)
INCLUDEPATH=-I. -Ikdusb -I/home/krystiand/prog/_uc/armtest/arm-public -I../kdutils/chips

CFLAGS=-mcpu=cortex-m0 -msoft-float -mthumb -nostartfiles -ggdb -Werror=implicit -O0 -fdata-sections -ffunction-sections
CFLAGS+=$(DEFINES)
CFLAGS+=$(INCLUDEPATH)
LFLAGS=-Wl,--relax,--gc-sections -Wl,-gc-sections -Wl,-Map=build/main.map -Wl,-T main.ld

all: build/main.elf
	mkdir -p build/
	arm-none-eabi-objcopy -O binary build/main.elf build/main.bin
	arm-none-eabi-objcopy -O ihex build/main.elf build/main.hex
	arm-none-eabi-objdump -h -S build/main.elf > build/main.lst
	arm-none-eabi-size build/main.elf

build/main.o: main.c
	$(CC) $(CFLAGS) -c $< -o $@

build/isr_f0.o: isr_f0.c
	$(CC) $(CFLAGS) -c $< -o $@

build/_home_krystiand_prog__uc_armtest_arm-public_delay.o: /home/krystiand/prog/_uc/armtest/arm-public/delay.c
	$(CC) $(CFLAGS) -c $< -o $@

build/_home_krystiand_prog__uc_armtest_arm-public_myprintf.o: /home/krystiand/prog/_uc/armtest/arm-public/myprintf.c
	$(CC) $(CFLAGS) -c $< -o $@

build/__kdutils_chips_RFM70.o: ../kdutils/chips/RFM70.c
	$(CC) $(CFLAGS) -c $< -o $@

build/__kdutils_chips_RFM70_init.o: ../kdutils/chips/RFM70_init.c
	$(CC) $(CFLAGS) -c $< -o $@

build/main.elf: build/main.o build/isr_f0.o build/_home_krystiand_prog__uc_armtest_arm-public_delay.o build/_home_krystiand_prog__uc_armtest_arm-public_myprintf.o build/__kdutils_chips_RFM70.o build/__kdutils_chips_RFM70_init.o
	$(CC) $(CFLAGS) $(LFLAGS) $^ -lm -lc -o $@

